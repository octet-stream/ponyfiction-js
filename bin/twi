#!/usr/bin/env node

// DEPRECATED
const {join} = require("path")

const {tryDeps, ROOT} = require("./helper.js")
const version = require("../package.json").version

tryDeps() // Check if deps haven't installed

process.chdir(ROOT)

const cli = require("commander")
const getCommands = require("../cli/util")

const COMMANDS_ROOT = join(ROOT, "cli", "command")

function onError(err) {
  console.error(err)
}

const init = commander => getCommands(COMMANDS_ROOT, commander)

process
  .on("error", onError)
  .on("SIGINT", () => process.exit(0))

// DEPRECATED: CLI will be removed from an application
init(cli)
  .version(version)
  .parse(process.argv)
